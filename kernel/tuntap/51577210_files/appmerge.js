if(!Array.prototype.push){Array.prototype.push=function(){var b=this.length;for(var a=0;a<arguments.length;a++){this[b+a]=arguments[a]}return this.length}}function G(){var c=new Array();for(var b=0;b<arguments.length;b++){var a=arguments[b];if(typeof a=="string"){a=document.getElementById(a)}if(arguments.length==1){return a}c.push(a)}return c}Function.prototype.bind=function(b){var a=this;return function(){a.apply(b,arguments)}};Function.prototype.bindAsEventListener=function(b){var a=this;return function(c){a.call(b,c||window.event)}};Object.extend=function(a,b){for(property in b){a[property]=b[property]}return a};if(!window.Event){var Event=new Object()}Object.extend(Event,{observers:false,element:function(a){return a.target||a.srcElement},isLeftClick:function(a){return(((a.which)&&(a.which==1))||((a.button)&&(a.button==1)))},pointerX:function(a){return a.pageX||(a.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft))},pointerY:function(a){return a.pageY||(a.clientY+(document.documentElement.scrollTop||document.body.scrollTop))},stop:function(a){if(a.preventDefault){a.preventDefault();a.stopPropagation()}else{a.returnValue=false;a.cancelBubble=true}},findElement:function(c,b){var a=Event.element(c);while(a.parentNode&&(!a.tagName||(a.tagName.toUpperCase()!=b.toUpperCase()))){a=a.parentNode}return a},_observeAndCache:function(d,c,b,a){if(!this.observers){this.observers=[]}if(d.addEventListener){this.observers.push([d,c,b,a]);d.addEventListener(c,b,a)}else{if(d.attachEvent){this.observers.push([d,c,b,a]);d.attachEvent("on"+c,b)}}},unloadCache:function(){if(!Event.observers){return}for(var a=0;a<Event.observers.length;a++){Event.stopObserving.apply(this,Event.observers[a]);Event.observers[a][0]=null}Event.observers=false},observe:function(d,c,b,a){var d=G(d);a=a||false;if(c=="keypress"&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||d.attachEvent)){c="keydown"}this._observeAndCache(d,c,b,a)},stopObserving:function(d,c,b,a){var d=G(d);a=a||false;if(c=="keypress"&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||d.detachEvent)){c="keydown"}if(d.removeEventListener){d.removeEventListener(c,b,a)}else{if(d.detachEvent){d.detachEvent("on"+c,b)}}}});Event.observe(window,"unload",Event.unloadCache,false);var Class=function(){var a=function(){this.initialize.apply(this,arguments)};for(i=0;i<arguments.length;i++){superClass=arguments[i];for(member in superClass.prototype){a.prototype[member]=superClass.prototype[member]}}a.child=function(){return new Class(this)};a.extend=function(b){for(property in b){a.prototype[property]=b[property]}};return a};var BdElement={show:function(a){G(a).style.display=""},hide:function(a){G(a).style.display="none"},getDimensions:function(b){var b=G(b);if(G(b).style.display!="none"){return{width:b.offsetWidth,height:b.offsetHeight}}var a=b.style;var e=a.visibility;var c=a.position;a.visibility="hidden";a.position="absolute";a.display="";var f=b.clientWidth;var d=b.clientHeight;a.display="none";a.position=c;a.visibility=e;return{width:f,height:d}}};var Feon=function(c,b,a){if(!(c=G(c))){return c}b=b.replace(/^on/,"").toLowerCase();if(c.attachEvent){c[b+a]=function(){a.call(c,window.event)};c.attachEvent("on"+b,c[b+a])}else{c.addEventListener(b,a,false)}return c};Object.extend(String.prototype,{getByteLen:function(){return this.replace(/[^\u0000-\u007f]/g,"\u0061\u0061").length},trim:function(){return this.replace(/(^\s+)|(\s+$)/g,"")},escapeHTML:function(){var b=document.createElement("div");var a=document.createTextNode(this);b.appendChild(a);return b.innerHTML},unescapeHTML:function(){var a=document.createElement("div");a.innerHTML=this.stripTags();return a.childNodes[0]?a.childNodes[0].nodeValue:""},stripTags:function(){return this.replace(/<\/?[^>]+>/gi,"")}});function showMsg(d,b,a){try{window.scrollTo(0,0)}catch(c){}var a=a||G("msgtip");a.style.display="";a.innerHTML=d;if(b>0){setTimeout(function(){a.style.display="none"},b)}}function CreateFlash(c,a,b,d,f){var e='<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=7,0,0,0" width="'+b+'" height="'+d+'" id="'+c+'" align="middle">';e+='<param name="allowScriptAccess" value="always">';e+='<param name="quality" value="high">';e+='<param name="movie" value="'+a+'">';e+='<param name="wmode" value="opaque">';e+='<param name="flashvars" value="'+f+'">';e+='<embed wmode="opaque" src="'+a+'" flashvars="'+f+'" quality="high" width="'+b+'" height="'+d+'" name="'+c+'" align="middle" allowScriptAccess="always" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer">';e+="</object>";document.write(e)}if(typeof BdUtil=="undefined"){BdUtil={}}BdUtil.ns_tracker=(function(){var a=109;var b=2009;function c(d,e){return function(){var g="nslog__"+(new Date()).getTime();var f=window[g]=new Image();f.onload=(f.onerror=function(){window[g]=null});f.src="http://nsclick.baidu.com/v.gif?pid="+a+"&url="+encodeURIComponent(e)+"&type="+b+"&m="+d+"&_t="+Math.random();f=null}}return function(n,d,g){g=(g||"").toUpperCase()||"A";var f=(typeof n=="string"),e=f?document.getElementById(n):n,k=d||(f?n:e.tagName),h=e.nodeName.toUpperCase()==g?[e]:e.getElementsByTagName(g);if(!h||h.length<=0){return false}for(var m=0,l=h.length;m<l;m++){var o=h[m];document.all?o.attachEvent("onmousedown",c(k,o)):o.addEventListener("mousedown",c(k,o),false)}}})();BdAjax=function(b){this.url="";this.data="";this.async=true;this.duration=-1;this.overtime=false;this.username="";this.password="";this.method="GET";if(typeof b=="object"&&b){for(var a in b){this[a]=b[a]}}};(function(){BdAjax.prototype.request=function(d,k){var h=this,f=b(),l=f.xhr;f.active=true;h.url=d;if(typeof k=="string"&&k){h.data=k}if(typeof h.onexecute=="function"){h.onexecute(l)}try{if(!h.username){l.open(h.method,h.url,h.async)}else{l.open(h.method,h.url,h.async,h.username,h.password)}if(h.async){l.onreadystatechange=g}if(h.method.toUpperCase()=="POST"){l.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}h.beginTime=new Date().getTime();if(h.duration>0){j()}l.send(h.data)}catch(e){if(typeof h.onerror=="function"){h.onerror(e)}}if(!h.async){g()}function g(){if(l.readyState==4){try{l.status}catch(m){if(typeof h.ondisconnect=="function"){h.ondisconnect(l)}f.active=false;return}h.duration=-1;if(!h.overtime){if(typeof h["on"+l.status]=="function"){h["on"+l.status](l)}if(l.status==200&&l.statusText.toLowerCase()=="ok"){if(typeof h.onsuccess=="function"){h.onsuccess(l)}}else{if(typeof h.onfailure=="function"){h.onfailure(l)}}}f.active=false;l.onreadystatechange=function(){}}}function j(){if(h.duration==-1){return}if(new Date().getTime()-h.beginTime>h.duration){h.duration=-1;try{l.abort()}catch(m){}h.overtime=true;f.active=false;if(typeof h.ontimeout=="function"){h.ontimeout(l)}}setTimeout(function(){j()},10)}};var c=[];function b(){var f=c;for(var e=null,d=0;d<f.length;d++){e=f[d];if(!e.active){break}}if(d>=f.length){e={active:false,xhr:a()};f[f.length]=e}return e}function a(){if(window.XMLHttpRequest){return new XMLHttpRequest()}else{if(window.ActiveXObject){var f=["MSXML2.XMLHttp.6.0","MSXML2.XMLHttp.3.0","MSXML2.XMLHttp.5.0","MSXML2.XMLHttp.4.0","Msxml2.XMLHTTP","MSXML.XMLHttp","Microsoft.XMLHTTP"];for(var e=0;f[e];e++){try{return new ActiveXObject(f[e])}catch(d){}}throw new Error("Your browser do not support XMLHttp")}}}})();BdAjax.request=function(b,c,a){if(typeof c=="object"&&c){a=c;c=null}else{if(typeof c=="function"){a=a||{};a.onsuccess=c;c=null}}var d=new BdAjax(a);d.request(b,c);return d};BdAjax.post=function(a,b,c){return this.request(a,b,{method:"POST",onsuccess:c})};BdAjax.get=function(a,b){return this.request(a,b)};parseQuery=function(f,e){var d=new RegExp("(^|&|\\?|#)"+e+"=([^&]*)(&|$)","i");var c=f.match(d);if(c){return c[2]}return null};BdAjax.sio=function(a,h,g){if(!a||typeof a!="string"){throw new Error("invalid url parameter!")}var j=document.createElement("SCRIPT");var b=parseQuery(a,g||"callback");if(b===null){var c=false;j.onreadystatechange=j.onload=function(){if(c){return false}if(j.readyState=="loaded"||j.readyState=="complete"){c=true;try{h()}finally{if(j.parentNode){j.parentNode.removeChild(j)}j.onreadystatechange=null;j.onload=null;j=null}}}}else{var e="CB"+Math.floor(Math.random()*2147483648).toString(36);a=a.replace(new RegExp((g||"callback")+"=([^&]*)"),(g||"callback")+"="+e);window[e]=function(){try{var k=(h||window[b]);k.apply(null,arguments)}finally{if(j.parentNode){j.parentNode.removeChild(j)}j=null;window[e]=null}}}j.src=a;j.type="text/javascript";var f=document.getElementsByTagName("HEAD")[0];if(!f){var d=document.getElementsByTagName("body")[0];f=document.createElement("head");d.parentNode.insertBefore(f,d)}f.insertBefore(j,f.firstChild)};function space(a){if(a=="begin"){var b=document.getElementById("ft");if(typeof(b)!="undefined"&&b!=null){b.id="ft_popup"}b=document.getElementById("usrbar");if(typeof(b)!="undefined"&&b!=null){b.id="usrbar_popup"}}else{if(a=="end"){var b=document.getElementById("ft_popup");if(typeof(b)!="undefined"&&b!=null){b.id="ft"}b=document.getElementById("usrbar_popup");if(typeof(b)!="undefined"&&b!=null){b.id="usrbar"}}}}var Popup=new Class();Popup.prototype={imgPath:"http://apps.hi.baidu.com/static/img/dialog/",iframeIdName:"ifr_popup",initialize:function(a){this.config=Object.extend({contentType:1,isHaveTitle:true,scrollType:"no",isBackgroundCanClick:false,isSupportDraging:true,isShowShadow:true,isReloadOnClose:true,width:400,height:300},a||{});this.info={shadowWidth:4,title:"",contentUrl:"",contentHtml:"",callBack:null,parameter:null,confirmCon:"",alertCon:"",someHiddenTag:"select,object,embed",someDisabledBtn:"",someHiddenEle:"",overlay:0,coverOpacity:45};this.color={cColor:"#000000",bColor:"#FFFFFF",tColor:"",wColor:"#000000"};this.dropClass=null;this.someToHidden=[];this.someToDisabled=[];if(!this.config.isHaveTitle){this.config.isSupportDraging=false}this.iniBuild()},setContent:function(a,b){if(b!=""){switch(a){case"width":this.config.width=b;break;case"height":this.config.height=b;break;case"title":this.info.title=b;break;case"contentUrl":this.info.contentUrl=b;break;case"contentHtml":this.info.contentHtml=b;break;case"callBack":this.info.callBack=b;break;case"parameter":this.info.parameter=b;break;case"confirmCon":this.info.confirmCon=b;break;case"alertCon":this.info.alertCon=b;break;case"someHiddenTag":this.info.someHiddenTag=b;break;case"someHiddenEle":this.info.someHiddenEle=b;break;case"someDisabledBtn":this.info.someDisabledBtn=b;break;case"overlay":this.info.overlay=b}}},iniBuild:function(){G("dialogCase")?G("dialogCase").parentNode.removeChild(G("dialogCase")):function(){};var a=document.createElement("span");a.id="dialogCase";document.body.appendChild(a)},build:function(){var c=10001+this.info.overlay*10;var g=c+2;this.iframeIdName="ifr_popup"+this.info.overlay;var k=this.imgPath;var b=k+"round.gif";var a=k+"x_repeat.gif";var d=k+"y_repeat.gif";var h='<input type="button" id="dialogBoxClose" style="background:url('+b+') no-repeat 0px -44px; border:0; cursor:pointer; width:17px; height:17px; margin-top:10px;"  border="0"  align="absmiddle" title="关闭"/>';var f="filter: alpha(opacity="+this.info.coverOpacity+");opacity:"+this.info.coverOpacity/100+";";var j='<div id="dialogBoxBG" style="position:absolute;top:0px;left:0px;width:100%;height:100%;z-index:'+c+";"+f+"background-color:"+this.color.cColor+';display:none;"></div>';var e='<div id="dialogBox" style="border:0px solid '+this.color.tColor+";display:none;z-index:"+g+";position:relative;width:"+this.config.width+'px;"><table width="100%" border="0" cellpadding="0" cellspacing="0" >';if(this.config.isHaveTitle){e+='<tr height="24" bgcolor="'+this.color.tColor+'"><td><table style="-moz-user-select:none;height:24px;" width="100%" border="0" cellpadding="0" cellspacing="0" ><tr><td style="width:15px; height:40px; background:url('+b+') no-repeat 0 0;"></td><td id="dialogBoxTitle" style="color:'+this.color.wColor+";font-size:14px;font-weight:bold;background:url("+a+') repeat-x top left; padding:10px 0 0 5px;">'+this.info.title+'&nbsp;</td><td id="dialogClose" style="background:url('+a+') repeat-x top left; width:23px;" align="center" valign="middle">'+h+'</td><td style="width:15px; height:40px; background:url('+b+') no-repeat -25px 0;"></td></tr></table></td></tr>'}else{e+='<tr height="10"><td align="right">'+h+"</td></tr>"}e+='<tr style="height:'+this.config.height+'px" valign="top"><td><table width="100%" height="100%" border="0" cellpadding="0" cellspacing="0"><tr style="height:'+this.config.height+'px; *height:auto;" ><td style="background:url('+d+') repeat-y top left; width:15px;"></td><td id="dialogBody" style="position:relative; background:#ffffff;"></td><td style="background:url('+d+') repeat-y top right; width:15px;"></td></tr></table></td></tr><tr><td><table width="100%" border="0" cellpadding="0" cellspacing="0"><tr style="line-height:0;"><td style="background:url('+b+') no-repeat bottom left; width:15px; font-size:0">&nbsp;</td><td style="background:url('+a+') repeat-x bottom left; height:15px; font-size:0">&nbsp;</td><td style="background:url('+b+') no-repeat bottom right; width:15px; font-size:0">&nbsp;</td></tr></table></td></tr></table></div><div id="dialogBoxIFRBG" style="display:none;z-index:'+c+';"><iframe frameborder="0" scrolling="no" style="filter:alpha(opacity=0); opacity:0;"; width="100%" height="100%"></iframe></div>';if(!this.config.isBackgroundCanClick){G("dialogCase").innerHTML=j+e;G("dialogBoxBG").style.height=(Math.max(document.documentElement.scrollHeight||document.body.scrollHeight,document.documentElement.clientHeight||document.body.clientHeight))+"px"}else{G("dialogCase").innerHTML=e}G("dialogBoxClose").onmouseover=function(){this.style.backgroundPosition="-23px -44px"};G("dialogBoxClose").onmouseout=function(){this.style.backgroundPosition="0px -44px"};Event.observe(G("dialogBoxClose"),"click",this.reset.bindAsEventListener(this),false);if(this.config.isSupportDraging){dropClass=new Dragdrop(this.config.width,this.config.height,this.info.shadowWidth,this.config.isSupportDraging,this.config.contentType);G("dialogBoxTitle").style.cursor="move"}this.lastBuild()},lastBuild:function(){var b="background:url(http://static.hi.baidu.com/apps/img/dialog/btn-1.gif) no-repeat; width:103px; height:30px; border:0; cursor:pointer;color:#ffffff; font-weight:bold; font-size:14px;text-align:center;line-height:30px;";var e="background:url(http://static.hi.baidu.com/apps/img/dialog/btn-2.gif) no-repeat; width:69px; height:30px; border:0; cursor:pointer;color:#525252; font-weight:bold; font-size:14px;text-align:center;line-height:30px;";var c='<div style="width:100%;height:100%;text-align:center;"><div style="margin:20px 20px 0 20px;font-size:14px;line-height:16px;color:#000000;">'+this.info.confirmCon+'</div><div style="margin:20px;"><input id="dialogOk" type="button" value="确定" style="'+b+'" />&nbsp;<input id="dialogCancel" type="button" value="取消" style="'+e+'" /></div></div>';var g='<div style="width:100%;height:100%;text-align:center;"><div style="margin:20px 20px 0 20px;font-size:14px;line-height:16px;color:#000000;">'+this.info.alertCon+'</div><div style="margin:20px;"><input id="dialogYES" type="button" value="确定" style="'+b+'" /></div></div>';var a=10001+this.info.overlay*10;var f=a+4;if(this.config.contentType==1){var d="<iframe width='100%' style='height:"+this.config.height+"px' name='"+this.iframeIdName+"' id='"+this.iframeIdName+"' src='"+this.info.contentUrl+"' frameborder='0' scrolling='"+this.config.scrollType+"'></iframe>";var h="<div id='iframeBG' style='position:absolute;top:0px;left:0px;width:1px;height:1px;z-index:"+f+";filter: alpha(opacity=00);opacity:0.00;background-color:#ffffff;'><div>";G("dialogBody").innerHTML=d+h}else{if(this.config.contentType==2){G("dialogBody").innerHTML=this.info.contentHtml}else{if(this.config.contentType==3){G("dialogBody").innerHTML=c;Event.observe(G("dialogOk"),"click",this.forCallback.bindAsEventListener(this),false);Event.observe(G("dialogCancel"),"click",this.close.bindAsEventListener(this),false)}else{if(this.config.contentType==4){G("dialogBody").innerHTML=g;Event.observe(G("dialogYES"),"click",this.close.bindAsEventListener(this),false)}}}}},reBuild:function(){G("dialogBody").height=G("dialogBody").clientHeight;this.lastBuild()},show:function(){this.hiddenSome();this.middle();this.shadow()},forCallback:function(){return this.info.callBack(this.info.parameter)},shadow:function(){var a=G("dialogBoxIFRBG");var b=G("dialogBox");a.style["position"]="absolute";a.style["display"]="";a.style["top"]=b.offsetTop+"px";a.style["left"]=b.offsetLeft+"px";a.style["width"]=b.offsetWidth+"px";a.style["height"]=b.offsetHeight+"px"},middle:function(){if(!this.config.isBackgroundCanClick){G("dialogBoxBG").style.display=""}var g=G("dialogBox");g.style["position"]="absolute";g.style["display"]="";var d=document.documentElement.clientWidth||document.body.clientWidth;var f=document.documentElement.clientHeight||document.body.clientHeight;var c=document.documentElement.scrollTop||document.body.scrollTop;var b=document.documentElement.scrollLeft||document.body.scrollLeft;var e=(d/2+b)-(g.offsetWidth/2);var h=-80+(f/2+c)-(g.offsetHeight/2);var a=h>0?h:(f/2+c)-(g.offsetHeight/2);if(a<1){a="20"}if(e<1){e="20"}g.style["left"]=e+"px";g.style["top"]=a+"px"},reset:function(){if(this.config.isReloadOnClose){top.location.reload()}this.close()},close:function(){if(!this.onclose()){return}G("dialogBox").style.display="none";if(!this.config.isBackgroundCanClick){G("dialogBoxBG").style.display="none"}G("dialogBoxIFRBG").style.display="none";G("dialogBody").innerHTML="";this.showSome()},onclose:function(){return true},hiddenSome:function(){var a=this.info.someHiddenTag.split(",");if(a.length==1&&a[0]==""){a.length=0}for(var b=0;b<a.length;b++){this.hiddenTag(a[b])}var c=this.info.someHiddenEle.split(",");if(c.length==1&&c[0]==""){c.length=0}for(var b=0;b<c.length;b++){this.hiddenEle(c[b])}var c=this.info.someDisabledBtn.split(",");if(c.length==1&&c[0]==""){c.length=0}for(var b=0;b<c.length;b++){this.disabledBtn(c[b])}space("begin")},disabledBtn:function(b){var a=document.getElementById(b);if(typeof(a)!="undefined"&&a!=null&&a.disabled==false){a.disabled=true;this.someToDisabled.push(a)}},hiddenTag:function(b){var c=document.getElementsByTagName(b);if(c!=null){for(var a=0;a<c.length;a++){if(c[a].style.display!="none"&&c[a].style.visibility!="hidden"){c[a].style.visibility="hidden";this.someToHidden.push(c[a])}}}},hiddenEle:function(b){var a=document.getElementById(b);if(typeof(a)!="undefined"&&a!=null){a.style.visibility="hidden";this.someToHidden.push(a)}},showSome:function(){for(var a=0;a<this.someToHidden.length;a++){this.someToHidden[a].style.visibility="visible"}for(var a=0;a<this.someToDisabled.length;a++){this.someToDisabled[a].disabled=false}space("end")},setTimeClose:function(b){var a=this;setTimeout(function(){a.close()},b)}};var Dragdrop=new Class();Dragdrop.prototype={initialize:function(c,b,a,d,e){this.dragData=null;this.dragDataIn=null;this.backData=null;this.width=c;this.height=b;this.shadowWidth=a;this.showShadow=d;this.contentType=e;this.IsDraging=false;this.oObj=G("dialogBox");Event.observe(G("dialogBoxTitle"),"mousedown",this.moveStart.bindAsEventListener(this),false)},moveStart:function(a){this.IsDraging=true;if(this.contentType==1){G("iframeBG").style.display="";G("iframeBG").style.width=this.width+"px";G("iframeBG").style.height=this.height+"px"}Event.observe(document,"mousemove",this.mousemove.bindAsEventListener(this),false);Event.observe(document,"mouseup",this.mouseup.bindAsEventListener(this),false);Event.observe(document,"selectstart",this.returnFalse,false);this.dragData={x:Event.pointerX(a),y:Event.pointerY(a)};this.backData={x:parseInt(this.oObj.style.left),y:parseInt(this.oObj.style.top)}},mousemove:function(a){if(!this.IsDraging){return}var c=Event.pointerX(a)-this.dragData.x+parseInt(this.oObj.style.left);var b=Event.pointerY(a)-this.dragData.y+parseInt(this.oObj.style.top);if(this.dragData.y<parseInt(this.oObj.style.top)){b=b-12}else{if(this.dragData.y>parseInt(this.oObj.style.top)+25){b=b+12}}this.oObj.style.left=c+"px";this.oObj.style.top=b+"px";G("dialogBoxIFRBG").style.left=c+"px";G("dialogBoxIFRBG").style.top=b+"px";this.dragData={x:Event.pointerX(a),y:Event.pointerY(a)};document.body.style.cursor="move"},mouseup:function(c){if(!this.IsDraging){return}if(this.contentType==1){G("iframeBG").style.display="none"}document.onmousemove=null;document.onmouseup=null;var b=Event.pointerX(c)-(document.documentElement.scrollLeft||document.body.scrollLeft);var a=Event.pointerY(c)-(document.documentElement.scrollTop||document.body.scrollTop);if(b<1||a<1||b>(document.documentElement.clientWidth||document.body.clientWidth)||a>(document.documentElement.clientHeight||document.body.clientHeight)){this.oObj.style.left=this.backData.x+"px";this.oObj.style.top=this.backData.y+"px";G("dialogBoxIFRBG").style.left=this.backData.x+"px";G("dialogBoxIFRBG").style.top=this.backData.y+"px"}this.IsDraging=false;document.body.style.cursor="";Event.stopObserving(document,"selectstart",this.returnFalse,false)},returnFalse:function(){return false}};var BdDialog={Iframe:function(e,g,b,j){var a=b||350;var f=j||100;var d=g||"提示";var c=new Popup({contentType:1,isReloadOnClose:false,width:a,height:f});c.setContent("title",d);c.setContent("contentUrl",e);c.build();c.show();return c},Alert:function(j,e,b,f){var a=b||350;var d=f||100;var c=e||"提示";var g=new Popup({contentType:4,isReloadOnClose:false,width:a,height:d});g.setContent("title",c);g.setContent("alertCon",j||"&nbsp");g.build();g.show();return g},Confirm:function(c,a,f,l,j,e){var b=j||350;var k=e||100;var d=l||"提示";var g=new Popup({contentType:3,isReloadOnClose:false,width:b,height:k});g.setContent("title",d);g.setContent("confirmCon",f||"&nbsp");g.setContent("callBack",c);g.setContent("parameter",a);g.build();g.show();return g},ShowText:function(j,e,b,f){var a=b||350;var d=f||100;var c=e||"提示";var g=new Popup({contentType:2,isReloadOnClose:false,width:a,height:d});g.setContent("title",c);g.setContent("contentHtml",j||"&nbsp");g.build();g.show();return g}};var bdLoginDialog=null;var selectDialog=null;var g_tabDialog=null;var g_activeDialog=null;var g_isGame=false;var g_spurl="";var g_appurl="";var g_jump_url=window.location;var g_isShare=false;function loginDialog(){bdLoginDialog=BdDialog.Iframe("https://passport.baidu.com/?login&psp_tt=2&tpl=sp&fu="+escape("http://apps.hi.baidu.com/static/html/loginok.html")+"&u="+escape(g_jump_url),"登录到百度空间",400,330)}function tabDialog(a){if(a){g_jump_url=a}else{g_jump_url=window.location}var c="http://apps.hi.baidu.com/static/html/login.html";var b="http://hi.baidu.com/reg/new?mode=iframe&u="+encodeURIComponent("http://apps.hi.baidu.com/static/html/loginok.html");g_tabDialog=new TabDialog({tabConfig:[{url:c,title:"登录",width:400,height:330},{url:b,title:"注册",width:750,height:480}],width:400,height:330,isResetCenter:true});g_tabDialog.build();g_tabDialog.show()}function setActiveTab(a){if(typeof a!="number"){a=0}a=a||0;g_tabDialog.changeTab(a)}function PSP_relogin(a,d){g_spurl=d;if(a==0){location.href=g_jump_url}else{if(a==1){if(g_isShare){if(g_tabDialog){g_tabDialog.close()}if(g_activeDialog){g_activeDialog.close()}var b=BdDialog.Iframe("http://apps.hi.baidu.com/static/html/space_share.html","激活空间成功",300,150);b.config.isReloadOnClose=true;return}if(g_isGame){if(g_tabDialog){g_tabDialog.close()}if(g_activeDialog){g_activeDialog.close()}var c="http://apps.hi.baidu.com/static/html/space_play.html";c+="?app_id="+escape(g_cur_app_id)+"&invite_id="+escape(g_cur_invite_id);var b=BdDialog.Iframe(c,"激活空间成功",350,250);b.config.isReloadOnClose=true}else{if(g_tabDialog){g_tabDialog.close()}if(g_activeDialog){g_activeDialog.close()}var b=BdDialog.Iframe("http://apps.hi.baidu.com/static/html/space_select.html","激活空间成功",350,250);b.config.isReloadOnClose=true}}}}function getSpurl(){return g_spurl}function getAppurl(){return g_appurl}function activeSpace(){g_activeDialog=BdDialog.Alert("该功能目前仅限百度空间用户使用。<br>点此：<a href='#' onclick='activeSpace2(); return false;'>立即激活空间</a>","激活空间");document.getElementById("dialogYES").value=" 取消 "}function activeSpace2(a){if(typeof window.checkPortraitResult=="undefined"){window.checkPortraitResult=function(b){b=b||{};b.emailVerified=1;if(b.emailVerified==1){activeSpace3(a)}else{emailVerify(680,300,"activeSpace3_"+(a||""))}}}baidu.sio.callByServer(App.Domain.space+"/reg/checkstatus?callback=checkPortraitResult&asyn=1",checkPortraitResult)}function activeSpace3(b){var a="http://hi.baidu.com/reg/actv?mode=iframe&u=http%3A%2F%2Fapps.hi.baidu.com%2Fstatic%2Fhtml%2Fproxy.html%3Ffun%3DcloseActiveSpace%26arg%3D"+(b||"");g_activeDialog=BdDialog.Iframe(a,"激活百度空间",720,360)}function closeActiveSpace(b){if(g_activeDialog){g_activeDialog.close();var a=null;if(b=="share"){a=BdDialog.Alert('<span style="font-size:12px">恭喜您，激活百度空间成功！现在可以开始分享啦</span>',"提示",350,150)}else{a=BdDialog.Alert('<span style="font-size:12px">恭喜您，激活百度空间成功！现在就可以玩各种应用啦</span>',"提示",350,150)}setTimeout(function(){a&&a.close();location.reload()},2000)}}function activeShare(){g_activeDialog=BdDialog.Alert("您必须激活空间后才能分享。<br>点此：<a href='#' onclick='activeSpace2(\"share\"); return false;'>立即激活空间</a>","激活空间");document.getElementById("dialogYES").value=" 取消 "}function gotoReg(){window.location.href="http://hi.baidu.com/sys/reg"}var emailVerifyDialog=null;function emailVerify(b,a,c){b=b||540;a=a||300;emailVerifyDialog=BdDialog.Iframe("http://hi.baidu.com/reg/mail?mode=iframe&u=http%3A%2F%2Fapps.hi.baidu.com%2Fstatic%2Fhtml%2Fproxy.html%3Ffun%3DcloseEmailVerify%26arg%3D"+(c||""),"验证邮箱",b,a)}function closeEmailVerify(b){try{emailVerifyDialog&&emailVerifyDialog.close();if(b){b=(b+"").split("_");if(b[0]&&typeof window[b[0]]=="function"){window[b[0]](b[1])}}}catch(a){}}var portraitConfirmDialog=null;function portraitConfirm(b,a){b=b||550;a=a||485;portraitConfirmDialog=BdDialog.Iframe("http://hi.baidu.com/reg/head?mode=iframe&u=&type=guide","头像认证",b,a)}function closePortraitConfirm(){try{portraitConfirmDialog&&portraitConfirmDialog.close()}catch(a){}location.reload()}var Page=function(d,e,a){var e=e||0;var b="";if(d<=1){return" &nbsp;"}if(d<=5){for(var c=0;c<d;c++){if(c==e){b+="<span>"+(c+1)+"</span> "}else{b+="<a href='"+a.replace("{p}",c)+"'>"+(c+1)+"</a> "}}}else{if(e<3){for(var c=0;c<5;c++){if(c==e){b+="<span>"+(c+1)+"</span> "}else{b+="<a href='"+a.replace("{p}",c)+"'>"+(c+1)+"</a> "}}b+="<a class='ch' href='"+a.replace("{p}",(e-0+1))+"'>下一页</a> ";b+="<a class='ch' href='"+a.replace("{p}",(d-0-1))+"'>尾页</a> "}else{b+="<a class='ch' href='"+a.replace("{p}",0)+"'>首页</a> ";b+="<a class='ch' href='"+a.replace("{p}",(e-0-1))+"'>上一页</a> ";if(d-e>2){for(var c=e-2;c<e-2+5;c++){if(c>=d){break}if(c==e){b+="<span>"+(c+1)+"</span> "}else{b+="<a href='"+a.replace("{p}",c)+"'>"+(c+1)+"</a> "}}if(e-0+2<d-1){b+="<a class='ch' href='"+a.replace("{p}",(e-0+1))+"'>下一页</a> ";b+="<a class='ch' href='"+a.replace("{p}",(d-0-1))+"'>尾页</a> "}}else{for(var c=d-5;c<d;c++){if(c>=d){break}if(c==e){b+="<span>"+(c+1)+"</span> "}else{b+="<a href='"+a.replace("{p}",c)+"'>"+(c+1)+"</a> "}}}}}return b};var Suggest=new Class();Suggest.prototype={initialize:function(a,d,c){this.inputBox=a;this.suggestArea=d;this.settings={type:0,data:[],url:"",pars:"",sg_width:0,sg_Bcolor:"#f7941c",subSg_width:120,subSg_Fcolor:"#666",subSg_Fsize:12,SubSg2_Fcolor:"#666",subSg2_Fsize:13,sg_num:10,sg_h:10,if2D:true,ifMulti:true,sugHv:"sugHv",sugItem:"sugItem",divide:",",showNoMatch:false};Object.extend(this.settings,c);this.rWords=[];this.suggestWords=[];if(this.settings.type==0){if(this.settings.if2D){this.suggestWords=this.settings.data}else{for(var b=0;b<this.settings.data.length;b++){this.suggestWords[b]=[this.settings.data[b],""]}}}this.index=0;this.readyWordNum=0;this.prefix="";Feon(document,"click",this.outClick.bindAsEventListener(this));G(this.inputBox).onkeyup=this.keyUpdateSuggest.bindAsEventListener(this);Feon(G(this.suggestArea),"click",this.selectSuggest.bindAsEventListener(this))},outClick:function(b){var a=Event.element(b);if(a.id!=this.inputBox&&a.id!=this.suggestArea){BdElement.hide(this.suggestArea);if(this.showNoMatch){BdElement.hide(this.suggestError)}return}},getValue:function(a){return this.settings.ifMulti?a.replace(/^[\,\;\，\；\、]+/,"").replace(/[^\,\;\，\；\、]+[\,\;\，\；\、]+/g,""):a},getKeycode:function(b){var a=-1;if(navigator.userAgent.indexOf("MSIE")!=-1){a=event.keyCode}else{a=b.which}return a},setCursor:function(d,a,e){if(navigator.userAgent.indexOf("Mozilla/5.")!=-1){d.setSelectionRange(a,e+a)}else{if(navigator.userAgent.indexOf("MSIE")!=-1){var b=d.createTextRange();b.collapse();b.select();var c=document.selection.createRange();b.collapse();c.moveStart("character",a);c.moveEnd("character",e);c.select()}}},suggestInputBox:function(a){var b=a.value;a.value=b.replace(/([^\,\;\，\；\、]*)$/,"")+G(this.suggestArea+"_"+this.readyWordNum).firstChild.innerHTML.unescapeHTML()+(this.settings.ifMulti?this.settings.divide:"");this.doneInput()},selectSuggest:function(a){if(!a){a=window.event}if(a.stopPropagation){a.stopPropagation()}else{if(a.preventBubble){a.preventBubble()}else{a.cancelBubble=true}}if(this.readyWordNum<0){return false}this.suggestInputBox(G(this.inputBox));len=G(this.inputBox).value.length;try{G(this.inputBox).focus()}catch(a){}this.setCursor(G(this.inputBox),len,0);BdElement.hide(this.suggestArea);this.readyWordNum=-1;return true},changeReadyWord:function(c){var b=Event.element(c);try{G(this.suggestArea+"_"+this.readyWordNum).className=this.settings.sugItem}catch(c){}if(b.tagName=="SPAN"){b=b.parentNode}var a=b.id.split("_");this.readyWordNum=parseInt(a[a.length-1]);b.className=this.settings.sugHv},changeWordonKey:function(c){var b=G(this.suggestArea);var d=c.offsetTop-b.scrollTop+1;if(d>=25*this.settings.sg_h){b.scrollTop+=25}if(d<0){b.scrollTop-=25}if(this.readyWordNum>=0){G(this.suggestArea+"_"+this.readyWordNum).className=this.settings.sugItem}c.className=this.settings.sugHv;var a=c.id.split("_");this.readyWordNum=parseInt(a[a.length-1])},genSuggestItem:function(d,a,c){var b=document.createElement("div");b.id=this.suggestArea+"_"+a;b.className=this.settings.sugItem;b.innerHTML="<span style='float:left;text-align:left;height:19px;width:"+this.settings.subSg_width+"px;font-size:"+this.settings.subSg_Fsize+"px'>"+d.escapeHTML()+"</span><span style='float:right;text-align:right;height:19px;font-size:"+this.settings.subSg2_Fsize+"px'>"+c+"</span>";b.onmouseover=this.changeReadyWord.bindAsEventListener(this);return b},keyChoose:function(b){var a=this.getKeycode(b);switch(a){case 38:this.setCursor(G(this.inputBox),G(this.inputBox).value.length,0);if(this.readyWordNum>0){this.changeWordonKey(G(this.suggestArea+"_"+(this.readyWordNum-1)))}return true;break;case 40:if(G(this.suggestArea+"_"+(this.readyWordNum+1))){this.changeWordonKey(G(this.suggestArea+"_"+(this.readyWordNum+1)))}return true;break;case 13:return this.selectSuggest(b);break;case 8:return false;break;case 37:return true;break;case 39:return true;break;case 16:return false;break;default:return false}},initSatus:function(a){if(a>0){BdElement.show(this.suggestArea);if(this.settings.sg_width==0){G(this.suggestArea).style.width=(BdElement.getDimensions(this.inputBox).width-1)+"px"}else{G(this.suggestArea).style.width=this.settings.sg_width+"px"}G(this.suggestArea).scrollTop="0px";if(this.showNoMatch){BdElement.hide(this.suggestError)}}else{BdElement.hide(this.suggestArea);this.readyWordNum=-1;this.noMatchWord()}},keyUpdateSuggest:function(a){if(this.keyChoose(a)){return}if(this.index==0){this.index=1;setTimeout(this.updateSuggest.bindAsEventListener(this),300)}},matchWords:function(c,d){var b=[];for(var a=0;a<d.length;a++){if(d[a][0].length>=c.length&&d[a][0].substring(0,c.length).toLowerCase()==c.toLowerCase()){b.push([d[a][0],d[a][1]])}}return b},updateSuggest:function(g){this.prefix=this.getValue(G(this.inputBox).value);this.index=0;var b=0;if(this.prefix){if(!this.rWords[this.prefix]){if(this.settings.type==1){this.getData(this,this.prefix)}else{G(this.suggestArea).innerHTML="";G(this.suggestArea).style.height="";this.dest=[];var f=this.matchWords(this.prefix,this.suggestWords);var a=f.length>this.settings.sg_num?this.settings.sg_num:f.length;for(var d=0;d<a;d++){this.dest[b]=this.genSuggestItem(f[d][0],b,f[d][1]);G(this.suggestArea).appendChild(this.dest[b]);b++}if(b>this.settings.sg_h){G(this.suggestArea).style.height=25*this.settings.sg_h+"px"}this.rWords[this.prefix]=G(this.suggestArea).innerHTML;this.initSatus(b)}}else{G(this.suggestArea).style.height="";G(this.suggestArea).innerHTML=this.rWords[this.prefix];var e=G(this.suggestArea).childNodes;b=e.length;for(var c=0;c<b;c++){e[c].onmouseover=this.changeReadyWord.bindAsEventListener(this)}if(b>this.settings.sg_h){G(this.suggestArea).style.height=25*this.settings.sg_h+"px"}this.initSatus(b)}}else{this.initSatus(0)}},getData:function(self,word){var _items=[];new BdAjax().request(self.settings.url,{method:"get",parameters:self.settings.pars,onComplete:function(xmlHttp){var jsonResults="("+unescape(xmlHttp.responseText)+")";var Items=eval(jsonResults);var totalSugs=0;for(var i=0;i<Items.items.length;i++){if(self.settings.if2D){_items[i]=[Items.items[i].tagName,Items.items[i].tagItemNum]}else{_items[i]=[Items.items[i].tagName,""]}}self.suggestWords=_items;var len=self.suggestWords.length>self.settings.sg_num?self.settings.sg_num:self.suggestWords.length;G(self.suggestArea).innerHTML="";G(self.suggestArea).style.height="";self.dest=[];for(i=0;i<len;i++){self.dest[totalSugs]=self.genSuggestItem(self.suggestWords[i][0],totalSugs,self.suggestWords[i][1]);G(self.suggestArea).appendChild(self.dest[totalSugs]);totalSugs++}if(totalSugs>self.settings.sg_h){G(self.suggestArea).style.height=25*self.settings.sg_h+"px"}self.rWords[self.prefix]=G(self.suggestArea).innerHTML;self.initSatus(totalSugs)}})},doneInput:function(){},showMatchWord:function(a,b){if(!G(a)){return}this.showNoMatch=true;this.suggestError=a;this.suggestErrorMsg=b},noMatchWord:function(){BdElement.show(this.suggestError);G(this.suggestError).innerHTML=this.suggestErrorMsg}};Function.prototype.bindEventArg=function(c,b){var a=this;return function(d){a.apply(c,[d||window.event].concat(b))}};var TabDialog=new Class(Popup);TabDialog.extend({tabImgPath:"http://apps.hi.baidu.com/static/img/dialog/",initialize:function(a){a=Object.extend({contentType:1,isResetCenter:false,isReloadOnClose:false,activeIndex:0,tabConfig:false},a||{});Popup.prototype.initialize.call(this,a)},setContent:function(a,b){Popup.prototype.setContent.call(this,a,b);if(b!=""){switch(a){case"isResetCenter":this.config.isResetCenter=b;break;case"activeIndex":this.config.activeIndex=b;break;case"tabConfig":this.config.tabConfig=b;break}}},build:function(){var k=this.config.tabConfig;var p=this.config.activeIndex||0;this.activeIndex=p;var f=this.config.tabConfig[p].width||this.config.width;var v=this.config.tabConfig[p].height||this.config.height;var d=10001+this.info.overlay*10;var l=d+2;this.iframeIdName="ifr_popup"+this.info.overlay;var s=this.imgPath;var r=s+"round.gif";var a=s+"x_repeat.gif";var m=s+"y_repeat.gif";var t=this.tabImgPath;var g=t+"round2.gif";var c=t+"x-repeat2.gif";var q='<input type="button" id="dialogBoxClose" style="background:url('+r+') no-repeat 0px -44px; border:0; cursor:pointer; width:17px; height:17px; margin-top:10px;"  border="0"  align="absmiddle" title="关闭"/>';var j="filter: alpha(opacity="+this.info.coverOpacity+");opacity:"+this.info.coverOpacity/100+";";var u='<div id="dialogBoxBG" style="position:absolute;top:0px;left:0px;width:100%;height:100%;z-index:'+d+";"+j+"background-color:"+this.color.cColor+';display:none;"></div>';var e='<div id="dialogBox" style="border:0px solid '+this.color.tColor+";display:none;z-index:"+l+";position:relative;width:"+f+'px;"><table width="100%" border="0" cellpadding="0" cellspacing="0" >';e+='<tr height="24" bgcolor="'+this.color.tColor+'"><td><table style="-moz-user-select:none;height:24px;" width="100%" border="0" cellpadding="0" cellspacing="0" ><tr><td style="width:15px; height:41px; background:url('+g+') no-repeat 0 0;"></td><td valign="top" id="dialogBoxTitle" style="color:'+this.color.wColor+";font-size:14px;font-weight:bold;background:url("+c+') repeat-x top left; padding:10px 0 0 5px;">';e+='<div style="width:100%;"><ul class="x-tab-list">';for(var b=0;b<k.length;b++){if(b!=p){e+='<li><a hidefocus="true" href="#" onclick="return false;">'+k[b].title+"</a></li>"}else{e+='<li class="x-tab-active"><a hidefocus="true" href="#" onclick="return false;">'+k[b].title+"</a></li>"}}e+="</ul></div>";e+='</td><td style="display:none"><div class="x-clear"></div></td><td id="dialogClose" style="background:url('+c+') repeat-x top left; width:23px;" align="center" valign="middle">'+q+'</td><td style="width:15px; height:41px; background:url('+g+') no-repeat -25px 0;"></td></tr></table></td></tr>';e+='<tr id="x-mainbox" style="height:'+v+'px" valign="top"><td><table width="100%" height="100%" border="0" cellpadding="0" cellspacing="0"><tr><td style="background:url('+m+') repeat-y top left; width:15px;"></td><td id="dialogBody" style="position:relative; background:#ffffff;"></td><td style="background:url('+m+') repeat-y top right; width:15px;"></td></tr></table></td></tr><tr><td><table width="100%" border="0" cellpadding="0" cellspacing="0"><tr><td style="background:url('+r+') no-repeat bottom left; width:15px;height:15px;line-height:15px;overflow:hidden">&nbsp;</td><td style="background:url('+a+') repeat-x bottom left; height:15px;line-height:15px;">&nbsp;</td><td style="background:url('+r+') no-repeat bottom right; width:15px;height:15px;line-height:15px;overflow:hidden">&nbsp;</td></tr></table></td></tr></table></div><div id="dialogBoxIFRBG" style="display:none;z-index:'+d+';"><iframe frameborder="0" scrolling="no" style="filter:alpha(opacity=0); opacity:0;" width="100%" height="100%"></iframe></div>';if(!this.config.isBackgroundCanClick){G("dialogCase").innerHTML=u+e;G("dialogBoxBG").style.height=(Math.max(document.documentElement.scrollHeight||document.body.scrollHeight,document.documentElement.clientHeight||document.body.clientHeight))+"px"}else{G("dialogCase").innerHTML=e}G("dialogBoxClose").onmouseover=function(){this.style.backgroundPosition="-23px -44px"};G("dialogBoxClose").onmouseout=function(){this.style.backgroundPosition="0px -44px"};Event.observe(G("dialogBoxClose"),"click",this.reset.bindAsEventListener(this),false);var n=G("dialogCase").getElementsByTagName("li");this.info.tabList=n;var o=this.config.changeTabHandler||this._changeTabHandler;for(var b=0;b<n.length;b++){var h=n[b].getElementsByTagName("a")[0];Event.observe(h,"mousedown",o.bindEventArg(this,[b]),false)}if(this.config.isSupportDraging){dropClass=new Dragdrop(f,v,this.info.shadowWidth,this.config.isSupportDraging,this.config.contentType);G("dialogBoxTitle").style.cursor="move"}this._mainBox=G("x-mainbox");this._dialogBox=G("dialogBox");this.lastBuild()},lastBuild:function(){var f="background:url("+this.imgPath+"btn_f2.gif) no-repeat; width:75px; height:32px; border:0; cursor:pointer;color:#ffffff; font-weight:bold; font-size:14px;";var a='<div style="width:100%;height:100%;text-align:center;"><div style="margin:20px 20px 0 20px;font-size:14px;line-height:16px;color:#000000;">'+this.info.confirmCon+'</div><div style="margin:20px;"><input id="dialogOk" type="button" value="确定" style="'+f+'" />&nbsp;<input id="dialogCancel" type="button" value="取消" style="'+f+'" /></div></div>';var h='<div style="width:100%;height:100%;text-align:center;"><div style="margin:20px 20px 0 20px;font-size:14px;line-height:16px;color:#000000;">'+this.info.alertCon+'</div><div style="margin:20px;"><input id="dialogYES" type="button" value="确定" style="'+f+'" /></div></div>';var e=10001+this.info.overlay*10;var b=e+4;var c=this.config.tabConfig[this.activeIndex].url;var g=this.config.tabConfig[this.activeIndex].height||this.config.height;var d="<iframe width='100%' style='height:"+g+"px' name='"+this.iframeIdName+"' id='"+this.iframeIdName+"' src='"+c+"' frameborder='0' scrolling='"+this.config.scrollType+"'></iframe>";var j="<div id='iframeBG' style='position:absolute;top:0px;left:0px;width:1px;height:1px;z-index:"+b+";filter: alpha(opacity=00);opacity:0.00;background-color:#ffffff;'><div>";G("dialogBody").innerHTML=d+j;this._contentFrame=G(this.iframeIdName)},_changeTabHandler:function(b,a){this.changeTab(a);Event.stop(b)},closeMe:function(){this._contentFrame=null;delete this._contentFrame;this.close()},changeTab:function(b){new Image().src="http://hi.baidu.com/sys/statlog/2.gif?m=app_reg_tab_click&v="+b+"&t="+Math.random();if(b!=this.activeIndex){var d=this.info.tabList[this.activeIndex];var e=this.info.tabList[b];d.className="";e.className="x-tab-active";var a=this.config.tabConfig[b];this._contentFrame.src=a.url;this.activeIndex=b;var c=a.width||this.config.width;this._dialogBox.style.width=c+"px";var f=a.height||this.config.height;this._contentFrame.style.height=f+"px";this._mainBox.style.height=f+"px";if(this.config.isResetCenter){this.middle()}}}});function BDJS_resizeImg(d,a,c){var b=a||30;var e=c||30;var f=new Image();f.onload=function(){var g=this.width;var h=this.height;if(g<=30&&h<=30){d.width=b;d.height=e;return}if(g/h>b/e){d.width=b;d.height=h/g*e}else{d.height=e;d.width=g/h*b}};f.src=d.src+"?t=1234567890"}var single_friend_selector=function(contObj,name,sid,option){this.name=name||"single_friend_selectoruid";this.sid=sid||"single_friend_selector_name_ex";this.idNum="sf"+parseInt(Math.random()*1000000);if(option){this.appid=option.appid||"";this.mode=option.mode||"all"}this.picDomain="";var _me=this;var _myFrdListData=[];var _myFrdListName=[];var _hasGetFrdData=false;function show(o){o.style.display=""}function hide(o){o.style.display="none"}Array.prototype.indexOf=function(str,isMuArr,arrLow){for(var i=0,n=this.length;i<n;i++){if(!isMuArr){if(str==this[i]){return i}else{if(str==this[i][arrLow]){return i}}}}return -1};this.init=function(){var _temp=[];_temp.push('<div id="'+this.idNum+'_container" class="sfrdselector">');_temp.push("<table><tr><td>");_temp.push('<div id="'+this.idNum+'_frdNameBox" class="frdNameBox"></div>');_temp.push('<input type="text" value="" id="'+this.idNum+'_frdNameSgt" class="frdNameSgt" />');_temp.push("</td><td>");_temp.push('<img id="'+this.idNum+'_showFrdListBnt" class="pointer" src="'+this.picDomain+'/static/img/tools/showfrd.gif"/>');_temp.push("</td></tr></table>");_temp.push('<div id="'+this.idNum+'_suggestarea" class="suggestarea"></div>');_temp.push('<div id="'+this.idNum+'_suggesterror" class="suggesterror"></div>');_temp.push('<input type="hidden" name="'+this.name+'" id="'+this.idNum+'_uid" value="" />');_temp.push('<input type="hidden" name="'+this.sid+'" id="'+this.idNum+'_sid" value="" />');_temp.push('<div id="'+this.idNum+'_frdListContainer" class="frdList">');_temp.push('<div class="ti">我的好友</div>');_temp.push('<div class="frdlistbox">');_temp.push('<table cellspacing="2" cellpadding="0">');_temp.push('<tbody id="'+this.idNum+'_frdListTb" class="frdListTb"></tbody>');_temp.push("</table>");_temp.push('<div class="pageBar" id="'+this.idNum+'_frdLsPn"></div>');_temp.push("</div>");_temp.push('<div class="frdlistcfm"><input id="'+this.idNum+'_frdSlOk" type="button" value="确定" class="bnt"/></div>');_temp.push("</div>");_temp.push("</div>");var _html=_temp.join("");if(contObj){G(contObj).innerHTML=_html}else{document.write(_html)}this.addListener()};this.addListener=function(){hide(G(this.idNum+"_frdNameBox"));hide(G(this.idNum+"_suggestarea"));hide(G(this.idNum+"_suggesterror"));hide(G(this.idNum+"_frdListContainer"));Feon(G(this.idNum+"_frdNameSgt"),"click",function(){if(!_hasGetFrdData){_me.getFriendListData()}});Feon(G(this.idNum+"_showFrdListBnt"),"click",function(){if(!_hasGetFrdData){_me.getFriendListData()}});Feon(G(this.idNum+"_showFrdListBnt"),"click",function(){_me.showFrdLsTable()});Feon(G(this.idNum+"_frdSlOk"),"click",function(){_me.selFrdOk()});Feon(G(this.idNum+"_frdNameSgt"),"onkeydown",function(event){key=event.keyCode||event.which;if(key==13){if(event.preventDefault){event.preventDefault()}else{event.returnValue=false}return false}})};this.getFriendListData=function(){if(_hasGetFrdData){return}var url=(App?App.Domain.apps:"http://apps.hi.baidu.com")+"/apps/getfriendlist?asyn=1&appid="+this.appid+"&mode="+this.mode+"&r="+new Date();BdAjax.get(url,this.getFrdLsDataDone)};this.getFrdLsDataDone=function(rs){_hasGetFrdData=true;var frdDataObj=eval("("+rs.responseText+")");if(frdDataObj.error){alert("数据错误！");return}var frdData=frdDataObj.frdData;for(var i=0,n=frdData.length;i<n;i++){_myFrdListData.push([frdData[i][0],frdData[i][1],frdData[i][2]]);_myFrdListName.push(frdData[i][0])}_me.initSuggest();_me.initFriendTable()};this.initSuggest=function(){var sg=new Suggest(this.idNum+"_frdNameSgt",this.idNum+"_suggestarea",{data:_myFrdListName,if2D:false,ifMulti:false});sg.doneInput=function(){if(G(_me.idNum+"_frdNameSgt").value!=""){var frdNameIndex=_myFrdListName.indexOf(G(_me.idNum+"_frdNameSgt").value);if(frdNameIndex>-1){_me.setuid()}else{G(_me.idNum+"_frdNameSgt").value=""}}};sg.showMatchWord(_me.idNum+"_suggesterror","好友不存在，请重新输入");Feon(G(this.idNum+"_frdNameSgt"),"blur",function(){if(_myFrdListName.indexOf(G(_me.idNum+"_frdNameSgt").value)==-1){G(_me.idNum+"_frdNameSgt").value=""}else{_me.setuid()}return true})};this.setuid=function(){var frdNameIndex=_myFrdListName.indexOf(G(this.idNum+"_frdNameSgt").value);G(this.idNum+"_uid").value=_myFrdListData[frdNameIndex][1];G(this.idNum+"_sid").value=_myFrdListData[frdNameIndex][2];var frdSgObj=G(this.idNum+"_frdNameSgt");frdSgObj.style.position="absolute";frdSgObj.style.left="-500px";show(G(this.idNum+"_frdNameBox"));G(this.idNum+"_frdNameBox").innerHTML='<span class="frdName">'+frdSgObj.value+' <img align="bottom" id="'+this.idNum+'_delselfrd" class="pointer"  src="'+this.picDomain+'/static/img/tools/close.gif" /></span>';G(this.idNum+"_delselfrd").onclick=function(){_me.delFrdName(this)};setTimeout(function(){G(_me.idNum+"_frdNameSgt").style.position="static";hide(frdSgObj);frdSgObj.blur()},100)};this.initFriendTable=function(){if(_myFrdListData.length<=0){var _td=document.createElement("td");var _tr=document.createElement("tr");_td.innerHTML="<nobr>您现在还没有好友，快去添加好友吧！</nobr>";_tr.appendChild(_td);G(this.idNum+"_frdListTb").appendChild(_tr);return}this.showFrdPn(0)};this.showFrdPn=function(nowPn){if(typeof(nowPn)=="undefined"){nowPn=0}var allDataLen=_myFrdListData.length;var allPn=Math.ceil(allDataLen/16);G(this.idNum+"_frdLsPn").innerHTML=Page(allPn,nowPn,"#{p}");var links=G(this.idNum+"_frdLsPn").getElementsByTagName("a");for(var i=0,n=links.length;i<n;i++){links[i].onclick=function(){var nowPn=this.href.match(/#(\d+)/)[1];_me.showFrdPn(nowPn);return false}}while(G(this.idNum+"_frdListTb").firstChild){G(this.idNum+"_frdListTb").removeChild(G(this.idNum+"_frdListTb").firstChild)}for(var i=nowPn*16,n=Math.min(16+nowPn*16,allDataLen);i<n;i++){if(i%4==0){var _tr=document.createElement("tr");G(this.idNum+"_frdListTb").appendChild(_tr)}var _td=document.createElement("td");_td.innerHTML='<table cellspacing="0" cellpadding="0" width="100%"><tr><td width="30" height="30" align="center" valign="middle"><img width="30" height="30" onload="BDJS_resizeImg(this)" src="http://tx.bdimg.com/sys/portraitn/item/'+_myFrdListData[i][1]+'.jpg"  /></td><td> '+_myFrdListData[i][0]+'<br /><input type="radio" name="frdlistitem" value="'+_myFrdListData[i][0]+'" /></td></tr></table>';_td.className="userbox";try{_tr.appendChild(_td)}catch(e){}}};this.showFrdLsTable=function(){var fcobj=G(this.idNum+"_frdListContainer");if(fcobj.style.display=="none"){show(fcobj);G(this.idNum+"_showFrdListBnt").src=this.picDomain+"/static/img/tools/hiddenfrd.gif"}else{hide(fcobj);G(this.idNum+"_showFrdListBnt").src=this.picDomain+"/static/img/tools/showfrd.gif"}};this.delFrdName=function(obj){var _this=obj.parentNode;_this.parentNode.removeChild(_this);G(this.idNum+"_uid").value="";G(this.idNum+"_sid").value="";G(this.idNum+"_frdNameSgt").value="";hide(G(this.idNum+"_frdNameBox"));show(G(this.idNum+"_frdNameSgt"))};this.selFrdOk=function(){var inps=G(this.idNum+"_frdListTb").getElementsByTagName("input");for(var i=0,n=inps.length;i<n;i++){if(inps[i].getAttribute("name")=="frdlistitem"&&inps[i].checked){var frdName=inps[i].getAttribute("value");var frdNameIndex=_myFrdListName.indexOf(frdName);G(this.idNum+"_uid").value=_myFrdListData[frdNameIndex][1];G(this.idNum+"_sid").value=_myFrdListData[frdNameIndex][2];G(this.idNum+"_frdNameSgt").style.display="none";G(this.idNum+"_frdNameBox").style.display="";G(this.idNum+"_frdNameBox").innerHTML='<span class="frdName">'+frdName+' <img id="'+this.idNum+'_delselfrd" align="bottom" class="pointer"  src="'+this.picDomain+'/static/img/tools/close.gif" /></span>';G(this.idNum+"_delselfrd").onclick=function(){_me.delFrdName(this)};break}}this.showFrdLsTable()};this.init()};function DEAD(d,c){}function B_Err(a){}var multi_friend_selector=function(contObj,name,sid,option){this.idNum="mf"+parseInt(Math.random()*1000000);this.name=name?(name.indexOf("[]")>-1?name:name+"[]"):"multi_friend_selectoruid[]";this.sid=sid?(sid.indexOf("[]")>-1?sid:sid+"[]"):"multi_friend_selector_name_ex[]";if(option){this.appid=option.appid||"";this.max=option.max||20;this.mode=option.mode||"all"}else{this.max=20}this.selectedFrdList=[];var _me=this;var _myFrdListData=[];var _myFrdListName=[];var _hasGetFrdData=false;function show(o){o.style.display=""}function hide(o){o.style.display="none"}function resizeImg(imgObj,W,H){var w=W||30;var h=H||30;var _im=new Image();_im.src=imgObj.src+"?t=1234567890";var _w=_im.width;var _h=_im.height;if(_w<=30&&_h<=30){imgObj.width=w;imgObj.height=h;return}if(_w/_h>w/h){imgObj.width=w;imgObj.height=_h/_w*h}else{imgObj.height=h;imgObj.width=_w/_h*w}}Array.prototype.indexOf=function(str,isMuArr,arrLow){for(var i=0,n=this.length;i<n;i++){if(!isMuArr){if(str==this[i]){return i}else{if(str==this[i][arrLow]){return i}}}}return -1};this.init=function(){var _temp=[];_temp.push('<div id="'+this.idNum+'_container" class="mufrdselector">');_temp.push("<div>");_temp.push('<input type="text" name="" id="'+this.idNum+'_inputbox" class="inputbox" value="试试输入好友的用户名" />');_temp.push('<input type="button" value="添加" id="'+this.idNum+'_inputok" />');_temp.push("</div>");_temp.push('<div id="'+this.idNum+'_suggestarea" class="suggestarea"></div>');_temp.push('<div id="'+this.idNum+'_suggesterror" class="suggesterror"></div>');_temp.push("<div></div>");_temp.push('<div class="frdlistbox">');_temp.push('<ul id="'+this.idNum+'_frdlist" class="frdlist">');_temp.push("</ul>");_temp.push('<div class="clear"></div>');_temp.push('<div class="pageBar" id="'+this.idNum+'_frdLsPn">');_temp.push("</div>");_temp.push('<div class="clear"></div>');_temp.push("</div>");if(this.max){_temp.push('<div class="selfrdnum">一次最多可选择 <b>'+this.max+'</b> 个好友，您已选择了 <span class="red" id="'+this.idNum+'_selfrdnum">'+this.selectedFrdList.length+"</span> 个</div>")}else{_temp.push('<div class="selfrdnum">您已选择了<span class="red" id="'+this.idNum+'_selfrdnum">'+this.selectedFrdList.length+"</span>个好友</div>")}_temp.push('<div class="frdselbox">');_temp.push('<ul id="'+this.idNum+'_frdsellist" class="frdsellist">');_temp.push("</ul>");_temp.push('<div class="clear"></div>');_temp.push("</div>");_temp.push("</div>");_html=_temp.join("");if(contObj){G(contObj).innerHTML=_html}else{document.write(_html)}this.addListener()};this.addListener=function(){hide(G(this.idNum+"_suggestarea"));hide(G(this.idNum+"_suggesterror"));Feon(G(this.idNum+"_inputbox"),"onfocus",function(){if(G(_me.idNum+"_inputbox").value=="试试输入好友的用户名"){G(_me.idNum+"_inputbox").value=""}});Feon(G(this.idNum+"_inputbox"),"onkeydown",function(event){key=event.keyCode||event.which;if(key==13){if(event.preventDefault){event.preventDefault()}else{event.returnValue=false}return false}});G(this.idNum+"_inputok").onclick=function(){_me.addInputFrds()};this.getFriendListData()};this.getFriendListData=function(){if(_hasGetFrdData){return}var url=(App?App.Domain.apps:"http://apps.hi.baidu.com")+"/apps/getfriendlist?asyn=1&appid="+this.appid+"&mode="+this.mode+"&r="+new Date();BdAjax.get(url,this.getFrdLsDataDone)};this.getFrdLsDataDone=function(rs){_hasGetFrdData=true;var frdDataObj=eval("("+rs.responseText+")");if(frdDataObj.error){alert("数据错误！");return}var frdData=frdDataObj.frdData;for(var i=0,n=frdData.length;i<n;i++){_myFrdListData.push([frdData[i][0],frdData[i][1],frdData[i][2]]);_myFrdListName.push(frdData[i][0])}_me.initSuggest();_me.initFrdList()};this.initFrdList=function(){if(_myFrdListData.length<=0){G(this.idNum+"_frdlist").innerHTML="<br><br>您现在还没有好友，快去添加好友吧！";return}this.showFrdPn(0)};this.showFrdPn=function(nowPn){var eachnum=15;if(typeof(nowPn)=="undefined"){nowPn=0}var allDataLen=_myFrdListData.length;var allPn=Math.ceil(allDataLen/eachnum);G(this.idNum+"_frdLsPn").innerHTML=Page(allPn,nowPn,"#{p}");var links=G(this.idNum+"_frdLsPn").getElementsByTagName("a");for(var i=0,n=links.length;i<n;i++){links[i].onclick=function(){var nowPn=this.href.match(/#(\d+)/)[1];_me.showFrdPn(nowPn);return false}}while(G(this.idNum+"_frdlist").firstChild){G(this.idNum+"_frdlist").removeChild(G(this.idNum+"_frdlist").firstChild)}for(var i=nowPn*eachnum,n=Math.min(eachnum+nowPn*eachnum,allDataLen);i<n;i++){var li=document.createElement("li");li.innerHTML='<table cellpadding="0" cellspacing="0" class="portraitBox"><tr><td class="tc">&nbsp;</td></tr><tr><td align="center" valign="middle" class="portrait"><img src="http://tx.bdimg.com/sys/portraitn/item/'+_myFrdListData[i][1]+'.jpg" border="0" /><img class="choice" src="/static/img/tools/choice.gif" border="0" style="display:none;" id="'+this.idNum+"_namesel_"+_myFrdListData[i][1]+'" /></td></tr><tr><td align="center" class="uname">'+_myFrdListName[i]+"</td></tr></table>";li.id=this.idNum+"_name_"+_myFrdListData[i][1];li.setAttribute("fname",_myFrdListName[i]);li.onclick=function(){_me.onSelectFrd(this)};if(this.selectedFrdList.indexOf(_myFrdListName[i])>-1){li.className="hover";li.getElementsByTagName("img")[1].style.display=""}G(this.idNum+"_frdlist").appendChild(li)}};this.initSuggest=function(){var sg=new Suggest(this.idNum+"_inputbox",this.idNum+"_suggestarea",{data:_myFrdListName,if2D:false,ifMulti:true});sg.showMatchWord(_me.idNum+"_suggesterror","好友不存在，请重新输入")};this.addInputFrds=function(){var frdlist=G(this.idNum+"_inputbox").value;if(frdlist.replace(/\s+/g,"")==""){return}var frdArr=frdlist.split(",");for(var i=0,n=frdArr.length;i<n;i++){if(_myFrdListName.indexOf(frdArr[i])>-1){if(this.selectedFrdList.indexOf(frdArr[i])==-1){this.addFrdName(frdArr[i],1)}}}G(this.idNum+"_inputbox").value=""};this.addFrdName=function(fname,dopt){if(this.selectedFrdList.length>=this.max&&dopt){return}var contO=G(this.idNum+"_container");var frdNameIndex=_myFrdListName.indexOf(fname);var uid=_myFrdListData[frdNameIndex][1];var sid=_myFrdListData[frdNameIndex][2];if(dopt){this.selectedFrdList.push(fname);var inp;if(document.all){inp=document.createElement('<input name="'+this.name+'">')}else{inp=document.createElement("input");inp.name=this.name}inp.type="hidden";inp.value=uid;inp.id=this.idNum+"_uid_"+uid;contO.appendChild(inp);if(document.all){inp=document.createElement('<input name="'+this.sid+'">')}else{inp=document.createElement("input");inp.name=this.sid}inp.type="hidden";inp.value=sid;inp.id=this.idNum+"_uid_"+sid;contO.appendChild(inp);var li=document.createElement("li");li.id=this.idNum+"_frdli_"+uid;li.innerHTML="<nobr>"+fname+' <img src="/static/img/tools/del.gif"  border="0" /></nobr>';li.setAttribute("fname",fname);G(this.idNum+"_frdsellist").appendChild(li);li.onmouseover=function(){this.className="hover"};li.onmouseout=function(){this.className=""};li.getElementsByTagName("img")[0].onclick=function(){var _this=this.parentNode.parentNode;_me.addFrdName(_this.getAttribute("fname"),0)};try{G(this.idNum+"_name_"+uid).className="hover";G(this.idNum+"_namesel_"+uid).style.display=""}catch(e){}}else{this.selectedFrdList.splice(this.selectedFrdList.indexOf(fname),1);contO.removeChild(G(this.idNum+"_uid_"+uid));contO.removeChild(G(this.idNum+"_uid_"+sid));G(this.idNum+"_frdsellist").removeChild(G(this.idNum+"_frdli_"+uid));try{G(this.idNum+"_name_"+uid).className="";G(this.idNum+"_namesel_"+uid).style.display="none"}catch(e){}}G(this.idNum+"_selfrdnum").innerHTML=this.selectedFrdList.length};this.onSelectFrd=function(o){var fname=o.getAttribute("fname");if(this.selectedFrdList.indexOf(fname)>-1){this.addFrdName(fname,0)}else{this.addFrdName(fname,1)}};this.init()};function autoResizedIframe(){window.onresize=autoResizedIframe;var c=document.getElementsByTagName("iframe");for(var b=0,d=c.length;b<d;b++){if(c[b].className=="auto_resized_iframe"){var a=document.documentElement.clientHeight||document.body.clientHeight;c[b].style.height=a-240+"px";break}}}function BDJS_portraitResize(c,a){var a=a||30;var b=window["pimg"+(new Date().getTime())]=new Image();b.onload=function(){var d=this.width;var e=this.height;if(d<=a&&e<=a){return}if(d>e){c.width=a;c.height=e/d*a}else{c.width=d/e*a;c.height=a}};b.src=c.src}function sCallback(a,c){var b=c.responseText;if(b=="1"){a.submit()}else{}}function onInviteFormSubmit(c){var b=(App?App.Domain.apps:"http://apps.hi.baidu.com")+"/invite/appinvite";var a=document.getElementsByName("portraits[]");var g=a.length;var k=new Array();for(var f=0;f<g;f++){k.push(a[f].value)}var h=k.join("&portraits[]=");var d=document.getElementsByName("app_id");var j=d[0].value;var e="app_id="+j+"&portraits[]="+h+"&t="+(new Date().getTime());BdAjax.post(b,e,function(l){sCallback(c,l)});return false}if(typeof App=="undefined"){window.App={}}App.getUserMessage=function(e,b){var f=baidu.g("topMsgTab"),a=baidu.g("topMsgList"),h=baidu.g("topMsgLi"),d=baidu.g("topMsgListIfr");window.showUnreadMsg=function(m){var l=parseInt(m.cmtMsgNum)+parseInt(m.addfrdMsgNum)+parseInt(m.sysMsgNum)+(typeof msgnum!="undefined"?msgnum:0);if(l>0){if(l>99){l="99+"}var j=document.createElement("span");j.style.cssText="color:#f00; font-size:12px;";j.innerHTML="("+l+")";f.appendChild(j)}var k=['<div class="icon1" onclick="window.location=\''+App.Domain.space+"/"+e+"/ihome/showmessagenum?msg=4'; return false;\"><nobr>好友添加 ("+m.addfrdMsgNum+")</nobr></div>",'<div class="icon2" onclick="window.location=\''+App.Domain.space+"/"+e+"/ihome/showmessagenum?msg=1'; return false;\"><nobr>留言评论 ("+m.cmtMsgNum+")</nobr></div>",'<div class="icon2" onclick="window.location=\''+App.Domain.space+"/"+e+"/ihome/showmessagenum?msg=3'; return false;\"><nobr>系统通知 ("+m.sysMsgNum+")</nobr></div>",'<div class="icon3" onclick="window.open(\'http://msg.baidu.com\'); return false;"><nobr>站内消息 ('+(typeof msgnum!="undefined"?msgnum:0)+")</nobr></div>"];a.innerHTML=k.join("");h.onmouseover=function(){a.style.display="";d.style.display=""};h.onmouseout=function(){a.style.display="none";d.style.display="none"}};var c=App.Domain.space+"/"+e+"/ihome/messagenum?callback=showUnreadMsg&asyn=1",g=App.Domain.msg+"/ms?ct=18&cm=3&tn=bmSelfUsrStat&mpn=13227114&un="+b;baidu.page.loadJsFile(g);baidu.page.loadJsFile(c)};App.getDefaultAppList=function(){return[{id:"10155",name:"开心部落",link:App.Domain.apps+"/kaixinbuluo"},{id:"10117",name:"汽车工厂",link:App.Domain.apps+"/rongcar"},{id:"10069",name:"泡泡鱼",link:App.Domain.apps+"/paopaoyu"}]};App.getAppListHtml=function(b){var a=[];baidu.each(b||[],function(c){a[a.length]=baidu.string.format(["<li>",'<a href="#{link}" id="appid-#{id}" target="_blank">','<span class="appicon#{id}">#{name}</span>',"</a>","</li>"].join(""),c)});return a.join("")};window.showInstalledAppList=App.showInstalledAppList=function(c){var a=[];baidu.each(App.getDefaultAppList(),function(f){a.push(f.id)});a=","+a.join(",")+",";for(var b=0,e=c.length,d;b<e;b++){d=c[b];d.id=d.id|0;if(a.indexOf(","+d.id+",")>-1||(d.id>=5000&&d.id<10000&&d.id!=5001)){c.splice(b,1);b--;e=c.length}}baidu.g("installAppList").innerHTML=App.getAppListHtml(c);(typeof g_cur_app_id!="undefined")&&baidu.g("appid-"+g_cur_app_id)&&(baidu.g("appid-"+g_cur_app_id).className="on");App.SideList.SetInstallAppVisible()};App.showAppList=function(){baidu.g("defaultAppList").innerHTML=App.getAppListHtml(App.getDefaultAppList())};App.SideList={};(function(a){a.ToggleList=function(e,c){baidu.dom.toggle(c);var d=e.className,b=d.indexOf("expanded");if(b>0){e.className=d.substr(0,b-1)}else{e.className=d+" expanded"}};a.SetInstallAppVisible=function(){if(baidu.string.trim(baidu.g("installAppList").innerHTML)!=""){baidu.dom.show("installAppList")}else{baidu.dom.hide("installAppList")}};a.SwapMoreThirdApp=function(e,c){var b=baidu.dom.getAttr(e,"data_status"),d=e.className;if(e.className.indexOf("expanded")>0){if(b=="more"){if(baidu.dom.getAttr("installAppList","data_empty")==1){baidu.page.loadJsFile(App.Domain.apps+"/apps/installedapps?user="+c+"&asyn=1&callback=showInstalledAppList&r="+Math.random());baidu.g("installAppList").innerHTML="loading...";baidu.dom.setAttr("installAppList","data_empty","0")}baidu.g("AppListAll").style.height="auto";baidu.dom.setAttr(e,"data_status","less")}a.SetInstallAppVisible()}else{baidu.dom.hide("installAppList")}}})(App.SideList);App.PortraitHandler={pop:null,switchPanel:function(a){baidu.G("portratiEdit").style.display=a?"block":"none"},openPanel:function(){Space.Libs.ns_trackerLink("m_20110427_newfleshMan_pop_txcj");this.pop=Space.Libs.bdDialog.showIframe({displayMode:"normal",title:"上传头像",url:App.Domain.space+"/reg/head?stat=txcj&mode=iframe&hasPadding=1&title=1&step=1&u="+encodeURIComponent(App.Domain.apps+"/static/html/proxy.html?fun=App.PortraitHandler.callback"),width:564,height:500})},callback:function(){App.PortraitHandler.pop.close();if(typeof window.checkPortraitResult=="undefined"){window.checkPortraitResult=function(a){a=a||{};var b="";if(a.portraitVerified==1){var b='<div style="background: url(http://img.baidu.com/hi/img/ihome/ihome_portrait_tip1.gif) no-repeat scroll 0 0 transparent;height:50px;line-height:25px; padding-left:60px;font-size:12px;margin: 20px 16px; text-align:left;">管理员正在火速审核中. . .<br> 预计审核时间为3分钟，审核后，即可生效您的头像哦！请耐心等待</div>'}else{var b='<div style="height: 70px; padding-left: 60px; font-size: 12px; margin: 15px 10px; background: url(http://img.baidu.com/hi/img/ihome/ihome_portrait_tip1.gif) no-repeat scroll 0pt -50px transparent;font-size:14px;color:#555555; text-align:left;"><div style="font-weight:bold;color:#333;margin-bottom:10px;padding-top:6px">您的头像已经生效了哦！</div><div style="color:#666;">如果您的头像符合真实、正面、清晰、完整的要求，将可以成为空间认证用户，获得更多的特权！</div></div>';setTimeout(function(){if(baidu.G("portrait-img")){baidu.G("portrait-img").src=baidu.G("portrait-img").src+"?_t="+Math.random()}},1000)}Space.Libs.bdDialog.alert(b,{title:(Session.userName||"您好")+"，欢迎来到百度空间",width:460}).setTimeClose(5000);if(baidu.g("userUploadBtn")){baidu.g("userUploadBtn").style.display="none"}}}baidu.sio.callByServer(App.Domain.space+"/reg/checkstatus?callback=checkPortraitResult&asyn=1",checkPortraitResult)},openTipPanel:function(){var b='<div style="padding:0;margin:0;width:450px;height:120px;background:url(http://img.baidu.com/hi/img/ihome/ihome-portrait-tip.gif)"></div>';var a=Space.Libs.bdDialog.alert(b,{title:"\u63D0\u793A",width:500}).setTimeClose(5000)}};if(typeof window.Libs=="undefined"){window.Libs={}}Function.prototype.bind=function(d){var c=this;return function(){return c.apply(d,arguments)}};Libs.getRandomId=function(){var b=[];b.push(parseInt(Math.random()*10000,10).toString());b.push(new Date().getTime().toString());return b.join("")};var _ua=navigator.userAgent.toLowerCase();var $IE=/msie/.test(_ua);var $moz=/gecko/.test(_ua);var $Safari=/safari/.test(_ua);Libs.arrayFind=function(a,c){var b=-1;baidu.each(a,function(e,d){if(c==e){b=d}});return b};Libs.bind3=function(d,c,b){b=b==null?[]:b;var a=d;return function(){return a.apply(c,b)}};if(typeof window.Class=="undefined"){window.Class={}}Class.extend=function(a,d,b){for(var c in d){if(b!=null){if(!a[c]){a[c]=d[c]}}else{a[c]=d[c]}}return a};if(typeof window.Libs=="undefined"){window.Libs={}}(function(c){var d=function(a){this.tmpl=a;this.pattern=/(#\{(.*?)\})/g};d.prototype={evaluate:function(a){return this.tmpl.replace(this.pattern,function(){return a[arguments[2]]||""})},evaluateMulti:function(a,f){var b=[];baidu.array.each(a,function(h,e){e=f?a.length-e:e;b[e]=this.evaluate(h)}.bind(this));return b.join("")}};c.template=d})(Libs);if(typeof window.Libs=="undefined"){window.Libs={}}(function(d){function c(b,a){this.create(b,a)}c.prototype={_CONTA:"layer_",_IFR:"iframe_",_randomId:"",_temp:"",_setContainer:function(a){this._temp=(a?"":'<iframe src="about:blank" style="display:none;z-index:99998;width:270px;height:80px;position:absolute;" id="'+this._IFR+'#{random}" frameborder="0"></iframe>')+'<div style="position:absolute;z-index:99999;display:none" id="'+this._CONTA+'#{random}">#{content}</div>'},create:function(b,a){this._randomId=Libs.getRandomId();var f={random:this._randomId,content:b};this._setContainer(a);var g=new Libs.template(this._temp);baidu.dom.insertHTML(document.body,"beforeEnd",g.evaluate(f))},getNode:function(){return baidu.g(this._CONTA+this._randomId)},show:function(){var a=this.getNode();a.style.display="";if(baidu.g(this._IFR+this._randomId)){baidu.g(this._IFR+this._randomId).style.display=""}},hidden:function(){var a=this.getNode();a.style.display="none";if(baidu.g(this._IFR+this._randomId)){baidu.g(this._IFR+this._randomId).style.display="none"}},setPosition:function(b,f){var g=this.getNode(),a=baidu.g(this._IFR+this._randomId);g.style.left=b+"px";g.style.top=f+"px";if(a){a.style.top=f+10+"px";a.style.left=b+"px";a.style.width=g.offsetWidth+"px";a.style.height=g.offsetHeight-10+"px"}},getRange:function(){var b=this.getNode();var a=baidu.dom.getPosition(b);a.right=a.left+b.offsetWidth;a.bottom=a.top+b.offsetHeight;return a}};d.Layer=c})(Libs);if(typeof window.Libs=="undefined"){window.Libs={}}(function(c){var d;if(!baidu.ie){d=function(){if(window.event){return window.event}var b=arguments.callee.caller;var e;var a=0;while(b!=null&&a<40){e=b.arguments[0];if(e&&(e.constructor==Event||e.constructor==MouseEvent)){return e}a++;b=b.caller}return e}}else{d=function(){return window.event}}c.getEvent=d})(Libs);if(typeof window.Libs=="undefined"){window.Libs={}}(function(c){function d(a){this.createLayer(a)}d.prototype={isShow:false,isInLayer:false,createLayer:function(b,a){this.layer=new Libs.Layer(b,a)},setPosition:function(b,a){this.layer.setPosition(b,a)},setCookie:function(){var a=new Date,b=new Date(a.getFullYear(),a.getMonth(),a.getDate()),f=new Date(b.valueOf()+2*24*3600*1000);baidu.cookie.set(this.cookieName+Session.userPortrait,"yes",{path:"/",expires:f,domain:App.Domain.space.substr(7)})},getCookie:function(){return baidu.cookie.get(this.cookieName+Session.userPortrait)},show:function(){if(!this.getCookie()){this.layer.show();this.isShow=true}},hidden:function(){this.layer.hidden();this.isShow=false},close:function(){this.hidden();this.setCookie()}};c.PopTips=d})(Libs);if(typeof window.Space=="undefined"){window.Space={}}(function(d){function c(f,a){this.targetId=f;var b='<div class="portraitTip"><div class="portraitTip_bg"></div><div class="portraitTip_link"><a target="_blank" id="portraitTip_link" onclick="return false" href="#"><strong>现在上传头像</strong></a></div><div class="portraitTip_close" id="portraitTip_close"></div></div>';this.cookieName="portraitTip_";this.createLayer(b);this.request(a);this.addEvent()}c.prototype={request:function(a){var b="http://hi.baidu.com/"+Session.userName+"/ihome/checkavatar";b+="?portrait="+Session.userPortrait;b+="&callback="+a;baidu.sio.callByBrowser(b)},onComplete:function(b){if(b.type=="0"){var f=baidu.g(this.targetId);var a=baidu.dom.getPosition(f);this.setPosition(a.left+f.offsetWidth,a.top);this.show()}},addEvent:function(){baidu.on(baidu.g("portraitTip_close"),"click",this.close.bind(this));baidu.on(baidu.g("portraitTip_link"),"click",this.edit.bind(this))},edit:function(){App.PortraitHandler.openPanel();this.hidden()}};baidu.extend(c.prototype,Libs.PopTips.prototype);d.PortraitTip=c})(Space);if(typeof window.Space=="undefined"){window.Space={}}(function(b){function a(c,d){this.target=baidu.g(c);if(!this.target){return}this.linkCallback=d;this.isUseCookie=false;this.createLayer(this.getContent());this.start();this.addEvent()}a.prototype={addEvent:function(){baidu.on(baidu.g("activeTip_close"),"click",this.close.bind(this));baidu.on(baidu.g("activeTip_link"),"click",this.go.bind(this))},start:function(){var c=this.target;var d=baidu.dom.getPosition(c);this.show();this.setPosition((d.left+(c.offsetWidth/2)-180),d.top+c.offsetHeight)},go:function(){this.linkCallback()},getContent:function(){var c='<div class="activeTip">			  <div class="activeTip_bg"></div>			  <div class="activeTip_link"> <a target="_blank" id="activeTip_link" onclick="return false" href="#">看看Ta是谁吧>></a></div>			  <div class="activeTip_close" id="activeTip_close"></div>			</div>';return c}};Class.extend(a.prototype,Libs.PopTips.prototype);b.ActiveTip=a})(Space);